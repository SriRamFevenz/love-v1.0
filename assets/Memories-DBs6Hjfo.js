import{r,j as i,R as W}from"./index-DY8E1CTQ.js";import{M as D,i as I,u as S,P as K,a as U,b as _,L as A,m as B}from"./proxy-BRbHVYfN.js";function z(t,l){if(typeof t=="function")return t(l);t!=null&&(t.current=l)}function F(...t){return l=>{let e=!1;const s=t.map(n=>{const c=z(n,l);return!e&&typeof c=="function"&&(e=!0),c});if(e)return()=>{for(let n=0;n<s.length;n++){const c=s[n];typeof c=="function"?c():z(t[n],null)}}}}function G(...t){return r.useCallback(F(...t),t)}class O extends r.Component{getSnapshotBeforeUpdate(l){const e=this.props.childRef.current;if(e&&l.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const s=e.offsetParent,n=I(s)&&s.offsetWidth||0,c=I(s)&&s.offsetHeight||0,o=this.props.sizeRef.current;o.height=e.offsetHeight||0,o.width=e.offsetWidth||0,o.top=e.offsetTop,o.left=e.offsetLeft,o.right=n-o.width-o.left,o.bottom=c-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function V({children:t,isPresent:l,anchorX:e,anchorY:s,root:n,pop:c}){const o=r.useId(),f=r.useRef(null),m=r.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:C}=r.useContext(D),h=t.props?.ref??t?.ref,j=G(f,h);return r.useInsertionEffect(()=>{const{width:u,height:p,top:x,left:b,right:w,bottom:R}=m.current;if(l||c===!1||!f.current||!u||!p)return;const E=e==="left"?`left: ${b}`:`right: ${w}`,M=s==="bottom"?`bottom: ${R}`:`top: ${x}`;f.current.dataset.motionPopId=o;const d=document.createElement("style");C&&(d.nonce=C);const y=n??document.head;return y.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${p}px !important;
            ${E}px !important;
            ${M}px !important;
          }
        `),()=>{y.contains(d)&&y.removeChild(d)}},[l]),i.jsx(O,{isPresent:l,childRef:f,sizeRef:m,pop:c,children:c===!1?t:r.cloneElement(t,{ref:j})})}const X=({children:t,initial:l,isPresent:e,onExitComplete:s,custom:n,presenceAffectsLayout:c,mode:o,anchorX:f,anchorY:m,root:C})=>{const h=S(Y),j=r.useId();let u=!0,p=r.useMemo(()=>(u=!1,{id:j,initial:l,isPresent:e,custom:n,onExitComplete:x=>{h.set(x,!0);for(const b of h.values())if(!b)return;s&&s()},register:x=>(h.set(x,!1),()=>h.delete(x))}),[e,h,s]);return c&&u&&(p={...p}),r.useMemo(()=>{h.forEach((x,b)=>h.set(b,!1))},[e]),r.useEffect(()=>{!e&&!h.size&&s&&s()},[e]),t=i.jsx(V,{pop:o==="popLayout",isPresent:e,anchorX:f,anchorY:m,root:C,children:t}),i.jsx(K.Provider,{value:p,children:t})};function Y(){return new Map}const N=t=>t.key||"";function L(t){const l=[];return r.Children.forEach(t,e=>{r.isValidElement(e)&&l.push(e)}),l}const q=({children:t,custom:l,initial:e=!0,onExitComplete:s,presenceAffectsLayout:n=!0,mode:c="sync",propagate:o=!1,anchorX:f="left",anchorY:m="top",root:C})=>{const[h,j]=U(o),u=r.useMemo(()=>L(t),[t]),p=o&&!h?[]:u.map(N),x=r.useRef(!0),b=r.useRef(u),w=S(()=>new Map),R=r.useRef(new Set),[E,M]=r.useState(u),[d,y]=r.useState(u);_(()=>{x.current=!1,b.current=u;for(let g=0;g<d.length;g++){const a=N(d[g]);p.includes(a)?(w.delete(a),R.current.delete(a)):w.get(a)!==!0&&w.set(a,!1)}},[d,p.length,p.join("-")]);const P=[];if(u!==E){let g=[...u];for(let a=0;a<d.length;a++){const v=d[a],k=N(v);p.includes(k)||(g.splice(a,0,v),P.push(v))}return c==="wait"&&P.length&&(g=P),y(L(g)),M(u),null}const{forceRender:H}=r.useContext(A);return i.jsx(i.Fragment,{children:d.map(g=>{const a=N(g),v=o&&!h?!1:u===d||p.includes(a),k=()=>{if(R.current.has(a))return;if(R.current.add(a),w.has(a))w.set(a,!0);else return;let $=!0;w.forEach(T=>{T||($=!1)}),$&&(H?.(),y(b.current),o&&j?.(),s&&s())};return i.jsx(X,{isPresent:v,initial:!x.current||e?void 0:!1,custom:l,presenceAffectsLayout:n,mode:c,root:C,onExitComplete:v?void 0:k,anchorX:f,anchorY:m,children:g},a)})})},Z=({onNext:t,content:l})=>{const[e,s]=r.useState(0),n=l.memories;W.useEffect(()=>{const f=setInterval(()=>{e<n.length-1&&s(m=>m+1)},4e3);return()=>clearInterval(f)},[e,n.length]);const c=()=>{e<n.length-1?s(f=>f+1):t()},o=()=>{e>0&&s(f=>f-1)};return i.jsxs("div",{className:"h-screen w-full bg-black flex flex-col items-center justify-center overflow-y-auto scrollbar-hide md:scrollbar-default relative",children:[i.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-30 blur-3xl transition-all duration-1000",style:{backgroundImage:`url(${n[e].img})`}}),i.jsxs("div",{className:"z-10 w-full max-w-md px-6 text-center py-10",children:[i.jsx("h2",{className:"text-white/80 text-3xl font-light mb-8 tracking-wide font-sans",children:"Our Memories"}),i.jsx(q,{mode:"wait",children:i.jsxs(B.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.5},className:"flex flex-col items-center",children:[i.jsx("div",{className:"relative w-full aspect-[4/5] rounded-2xl overflow-hidden shadow-2xl mb-8 border border-white/10",children:i.jsx("img",{src:n[e].img,alt:"Memory",className:"w-full h-full object-cover"})}),i.jsxs("p",{className:"text-white/90 text-2xl font-light tracking-wide font-sans italic min-h-[4rem]",children:['"',n[e].text,'"']})]},e)}),i.jsxs("div",{className:"mt-10 flex items-center justify-between gap-4",children:[i.jsx("button",{onClick:o,disabled:e===0,className:`text-white px-6 py-3 rounded-full border border-white/30 hover:bg-white/10 transition-all ${e===0?"opacity-30 cursor-not-allowed":"opacity-100"}`,children:"← Prev"}),i.jsx("div",{className:"flex gap-2",children:n.map((f,m)=>i.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${m===e?"w-6 bg-white":"w-2 bg-white/30"}`},m))}),i.jsxs("button",{onClick:c,className:"bg-white text-black px-8 py-3 rounded-full font-semibold hover:bg-gray-200 transition-all shadow-lg hover:scale-105 active:scale-95",children:[e===n.length-1?"Continue":"Next"," →"]})]})]})]})};export{Z as default};
